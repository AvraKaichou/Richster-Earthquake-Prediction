# -*- coding: utf-8 -*-
"""main_app.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1hPdamRn_W7F5i79omuoY8TIoBIlm6p8a
"""

import streamlit as st
import joblib
import numpy as np

# Load model dan preprocessing
model = joblib.load('catboost_model.pkl')
scaler = joblib.load('scaler.pkl')
pca = joblib.load('pca.pkl')

st.title("Prediksi Kerusakan Bangunan Gempa")

# Input data dari user
age = st.number_input("Umur Bangunan", value=25)
area_percentage = st.slider("Luas Area (%)", 0, 100, 10)
height_percentage = st.slider("Tinggi Bangunan (%)", 0, 100, 5)

# Data gabungan (contoh: hanya 3 fitur dulu)
data = np.array([[age, area_percentage, height_percentage]])

# Prediksi saat tombol ditekan
if st.button("üîç Prediksi"):
    try:
        data_scaled = scaler.transform(data)
        data_pca = pca.transform(data_scaled)
        pred = model.predict(data_pca)[0]
        label = ["Low", "Medium", "High"][int(pred)]
        st.success(f"üè∑Ô∏è Hasil Prediksi Tingkat Kerusakan: **{label}**")
    except Exception as e:
        st.error(f"‚ùå Terjadi error saat memproses data: {e}")

